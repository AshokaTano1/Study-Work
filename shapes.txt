def __SaveFolderStructure(folderFrom, folderTo, userFrom, userTo):
    for link in Link.objects.filter(inFolder=folderFrom, user=userFrom,):
        link.pk = None
        link.inFolder = folderTo
        link.user = userTo
        # link.idTab = 0
        with transaction.atomic():
            link.save()
    for child in Folder.objects.filter(inFolder=folderFrom, user=userFrom):
        
        folderFrom = deepcopy(child)
        child.pk = None
        child.inFolder = folderTo
        child.user = userTo
        # child.idTab = 0
        with transaction.atomic():
            child.save()
        __SaveFolderStructure(folderFrom, child, userFrom, userTo)
