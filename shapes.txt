@admin.action(description="Экспортировать логи в CSV")
def export_logs_to_csv(modeladmin, request, queryset):
    response = HttpResponse(content_type="text/csv")
    response["Content-Disposition"] = 'attachment; filename="logs.csv"'

    writer = csv.writer(response)
    writer.writerow(["user", "time", "text", "ip", "url"])  # Заголовки CSV

    for log in queryset:
        writer.writerow([
            log.user.username if log.user else "Аноним",
            log.time.strftime("%Y-%m-%d %H:%M:%S"),
            log.text,
            log.ip,
            log.url,
        ])

    return response
